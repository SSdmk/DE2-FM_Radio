\doxysection{oled.\+h File Reference}
\hypertarget{oled_8h}{}\label{oled_8h}\index{oled.h@{oled.h}}


Rozhranie pre ovládanie OLED displeja (I2C, 128x64).  


{\ttfamily \#include $<$stdint.\+h$>$}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{oled_8h_ad95f850c4c6d949229270c8da88c02cb}{oled\+\_\+init}} (void)
\begin{DoxyCompactList}\small\item\em Inicializuje OLED displej a pripraví ho na použitie. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a66cdd05fb3a765535af54825cb9eb26c}{oled\+\_\+clear}} (void)
\begin{DoxyCompactList}\small\item\em Vymaže celý obsah OLED displeja. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a965a903511fe77096f3d867e1446d1b1}{oled\+\_\+draw\+\_\+char}} (uint8\+\_\+t page, uint8\+\_\+t \texorpdfstring{$\ast$}{*}col, char c)
\begin{DoxyCompactList}\small\item\em Vykreslí jeden znak fontu 5×7 na zadanú page a stĺpec. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a3e97406871b960bc42345090086dee07}{oled\+\_\+draw\+\_\+string}} (uint8\+\_\+t page, uint8\+\_\+t col, const char \texorpdfstring{$\ast$}{*}s)
\begin{DoxyCompactList}\small\item\em Vykreslí C-\/reťazec na danú stránku od zadaného stĺpca. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a73b1b0c88932700a241f54267bd1e202}{oled\+\_\+show\+\_\+radio\+\_\+screen}} (int freq\+\_\+khz, int volume, int rssi, bool muted)
\begin{DoxyCompactList}\small\item\em Zobrazí hlavnú obrazovku rádia (frekvencia, hlasitosť, RSSI, mute). \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a99a1333fda6336b0993a6eb62cfae22d}{oled\+\_\+show\+\_\+favorite\+\_\+saved\+\_\+bottom}} (int freq\+\_\+khz)
\begin{DoxyCompactList}\small\item\em Krátko zobrazí informáciu o uložení obľúbenej stanice v spodnej časti. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{oled_8h_a30f16333a73ccde8d8b747f3a5387da7}{oled\+\_\+show\+\_\+power\+\_\+off}} (void)
\begin{DoxyCompactList}\small\item\em Zobrazí informáciu, že FM rádio je vypnuté (power off). \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Rozhranie pre ovládanie OLED displeja (I2C, 128x64). 

Tento modul poskytuje základné funkcie na\+:
\begin{DoxyItemize}
\item inicializáciu OLED displeja,
\item mazanie obrazovky,
\item vykresľovanie znakov a textových reťazcov,
\item zobrazenie špeciálnej obrazovky pre FM rádio (frekvencia, hlasitosť, RSSI, stav mute),
\item krátke informačné hlášky (napr. uložená stanica),
\item zobrazenie stavu vypnutého rádia. 
\end{DoxyItemize}

\label{doc-func-members}
\Hypertarget{oled_8h_doc-func-members}
\doxysubsection{Function Documentation}
\Hypertarget{oled_8h_a66cdd05fb3a765535af54825cb9eb26c}\index{oled.h@{oled.h}!oled\_clear@{oled\_clear}}
\index{oled\_clear@{oled\_clear}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_clear()}{oled\_clear()}}
{\footnotesize\ttfamily \label{oled_8h_a66cdd05fb3a765535af54825cb9eb26c} 
void oled\+\_\+clear (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Vymaže celý obsah OLED displeja. 

Prejde všetky stránky (pages) displeja a do všetkých stĺpcov zapíše nulu, čím vyčistí celý obraz. Po zavolaní je displej prázdny.

Vymaže celý obsah OLED displeja.

Pre každú stránku (0–7)\+:
\begin{DoxyItemize}
\item nastaví stĺpec na 0,
\item zapíše 132 bajtov hodnôt 0x00 (čierne pixely). 
\end{DoxyItemize}\Hypertarget{oled_8h_a965a903511fe77096f3d867e1446d1b1}\index{oled.h@{oled.h}!oled\_draw\_char@{oled\_draw\_char}}
\index{oled\_draw\_char@{oled\_draw\_char}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_draw\_char()}{oled\_draw\_char()}}
{\footnotesize\ttfamily \label{oled_8h_a965a903511fe77096f3d867e1446d1b1} 
void oled\+\_\+draw\+\_\+char (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{page}{, }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{col}{, }\item[{char}]{c}{}\end{DoxyParamCaption})}



Vykreslí jeden znak fontu 5×7 na zadanú page a stĺpec. 

Znak je vykreslený na\+:
\begin{DoxyItemize}
\item vertikálnej stránke {\ttfamily page} (0–7),
\item aktuálnej pozícii {\ttfamily \texorpdfstring{$\ast$}{*}col} v rámci šírky displeja.
\end{DoxyItemize}

Po vykreslení\+:
\begin{DoxyItemize}
\item sa medzi znaky pridáva jedna prázdna kolóna,
\item ukazovateľ {\ttfamily col} je automaticky posunutý za vykreslený znak (typicky o 6 pixelových stĺpcov).
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em page} & Stránka (vertikálny blok) displeja, 0–7. \\
\hline
{\em col} & Ukazovateľ na aktuálny stĺpec; po vykreslení bude posunutý. \\
\hline
{\em c} & Znak, ktorý sa má vykresliť.\\
\hline
\end{DoxyParams}
Vykreslí jeden znak fontu 5×7 na zadanú page a stĺpec.

Postup\+:
\begin{DoxyItemize}
\item získa bitmapu znaku cez font\+\_\+get\+\_\+char,
\item nastaví pozíciu kurzora na {\ttfamily page} a {\ttfamily \texorpdfstring{$\ast$}{*}col},
\item postupne pošle 5 stĺpcov bitmapy,
\item pridá jeden prázdny stĺpec ako medzeru medzi znakmi,
\item po vykreslení posunie {\ttfamily \texorpdfstring{$\ast$}{*}col} o 6 stĺpcov.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em page} & Stránka (0–7), na ktorej sa má znak vykresliť. \\
\hline
{\em col} & Ukazovateľ na aktuálny stĺpec; po vykreslení bude posunutý. \\
\hline
{\em c} & Znak, ktorý sa má vykresliť. \\
\hline
\end{DoxyParams}
\Hypertarget{oled_8h_a3e97406871b960bc42345090086dee07}\index{oled.h@{oled.h}!oled\_draw\_string@{oled\_draw\_string}}
\index{oled\_draw\_string@{oled\_draw\_string}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_draw\_string()}{oled\_draw\_string()}}
{\footnotesize\ttfamily \label{oled_8h_a3e97406871b960bc42345090086dee07} 
void oled\+\_\+draw\+\_\+string (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{page}{, }\item[{uint8\+\_\+t}]{col}{, }\item[{const char \texorpdfstring{$\ast$}{*}}]{s}{}\end{DoxyParamCaption})}



Vykreslí C-\/reťazec na danú stránku od zadaného stĺpca. 

Postupne volá \doxylink{oled_8cpp_a965a903511fe77096f3d867e1446d1b1}{oled\+\_\+draw\+\_\+char} pre každý znak reťazca, kým\+:
\begin{DoxyItemize}
\item nenarazí na koniec reťazca ({\ttfamily \textquotesingle{}\textbackslash{}0\textquotesingle{}}),
\item alebo nenarazí na koniec riadku (šírku displeja).
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em page} & Stránka (vertikálny blok) displeja, 0–7. \\
\hline
{\em col} & Počiatočný stĺpec, odkiaľ sa začne text vykresľovať. \\
\hline
{\em s} & Ukazovateľ na nulou ukončený C-\/reťazec.\\
\hline
\end{DoxyParams}
Vykreslí C-\/reťazec na danú stránku od zadaného stĺpca.

Iteratívne volá \doxylink{oled_8cpp_a965a903511fe77096f3d867e1446d1b1}{oled\+\_\+draw\+\_\+char}, kým\+:
\begin{DoxyItemize}
\item nenarazí na koniec reťazca,
\item alebo by ďalší znak presiahol šírku displeja (kontrola {\ttfamily col} \texorpdfstring{$<$}{<}= 122).
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em page} & Stránka (0–7), na ktorej sa text vykresľuje. \\
\hline
{\em col} & Počiatočný stĺpec. \\
\hline
{\em s} & Nulou ukončený C-\/reťazec. \\
\hline
\end{DoxyParams}
\Hypertarget{oled_8h_ad95f850c4c6d949229270c8da88c02cb}\index{oled.h@{oled.h}!oled\_init@{oled\_init}}
\index{oled\_init@{oled\_init}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_init()}{oled\_init()}}
{\footnotesize\ttfamily \label{oled_8h_ad95f850c4c6d949229270c8da88c02cb} 
void oled\+\_\+init (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Inicializuje OLED displej a pripraví ho na použitie. 

Nastaví komunikačný režim (TWI/\+I2C), pošle základné inicializačné príkazy do displeja a na záver vymaže obrazovku volaním \doxylink{oled_8cpp_a66cdd05fb3a765535af54825cb9eb26c}{oled\+\_\+clear}. Funkciu je potrebné zavolať raz po štarte programu.

Inicializuje OLED displej a pripraví ho na použitie.

Kroky\+:
\begin{DoxyItemize}
\item inicializuje TWI/\+I2C volaním \doxylink{group__fryza__twi_ga16f0e6b2fa5a26eadbf4086ab6d54467}{twi\+\_\+init},
\item počká cca 100 ms po napájaní,
\item pošle sériu inicializačných príkazov podľa datasheetu,
\item zapne displej (0x\+AF),
\item vymaže obrazovku volaním \doxylink{oled_8cpp_a66cdd05fb3a765535af54825cb9eb26c}{oled\+\_\+clear}. 
\end{DoxyItemize}\Hypertarget{oled_8h_a99a1333fda6336b0993a6eb62cfae22d}\index{oled.h@{oled.h}!oled\_show\_favorite\_saved\_bottom@{oled\_show\_favorite\_saved\_bottom}}
\index{oled\_show\_favorite\_saved\_bottom@{oled\_show\_favorite\_saved\_bottom}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_show\_favorite\_saved\_bottom()}{oled\_show\_favorite\_saved\_bottom()}}
{\footnotesize\ttfamily \label{oled_8h_a99a1333fda6336b0993a6eb62cfae22d} 
void oled\+\_\+show\+\_\+favorite\+\_\+saved\+\_\+bottom (\begin{DoxyParamCaption}\item[{int}]{freq\+\_\+khz}{}\end{DoxyParamCaption})}



Krátko zobrazí informáciu o uložení obľúbenej stanice v spodnej časti. 

Funkcia vykreslí text v štýle „\+FAVORITE 107.\+0\+MHz“ na spodnej časti displeja tak, aby neprepísala hlavnú časť obrazovky rádia. Typicky sa používa po úspešnom uložení aktuálnej frekvencie medzi obľúbené stanice.


\begin{DoxyParams}{Parameters}
{\em freq\+\_\+khz} & Frekvencia v k\+Hz, ktorá bola práve uložená.\\
\hline
\end{DoxyParams}
Krátko zobrazí informáciu o uložení obľúbenej stanice v spodnej časti.

Postup\+:
\begin{DoxyItemize}
\item prepočíta {\ttfamily freq\+\_\+khz} na formát MHz (napr. 10700 → 107.\+0),
\item pripraví text v tvare {\ttfamily "{}FAVORITE 107.\+0\+MHz"{}},
\item vymaže spodnú stránku (page 7),
\item vykreslí text s menším horizontálnym odsadením,
\item nechá správu svietiť \texorpdfstring{$\sim$}{\string~}3 sekundy,
\item znovu vymaže spodný riadok.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em freq\+\_\+khz} & Frekvencia uložená ako obľúbená, v k\+Hz. \\
\hline
\end{DoxyParams}
\Hypertarget{oled_8h_a30f16333a73ccde8d8b747f3a5387da7}\index{oled.h@{oled.h}!oled\_show\_power\_off@{oled\_show\_power\_off}}
\index{oled\_show\_power\_off@{oled\_show\_power\_off}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_show\_power\_off()}{oled\_show\_power\_off()}}
{\footnotesize\ttfamily \label{oled_8h_a30f16333a73ccde8d8b747f3a5387da7} 
void oled\+\_\+show\+\_\+power\+\_\+off (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Zobrazí informáciu, že FM rádio je vypnuté (power off). 

Funkcia vyčistí horný riadok displeja a zobrazí text „\+FM Radio is power off“. Je určená na použitie v stave, keď je tuner vypnutý ({\ttfamily radio.\+power\+Down()}) a nechceme zobrazovať ani mute, ani bežnú hlavnú obrazovku rádia.

Zobrazí informáciu, že FM rádio je vypnuté (power off).

Funkcia\+:
\begin{DoxyItemize}
\item vyčistí horný riadok (page 0), kde predtým mohol byť text „\+FM Radio“ alebo „\+FM Radio is Mute“,
\item vykreslí text „\+FM Radio is power off“ s malým odsadením.
\end{DoxyItemize}

Používa sa pri dlhom stlačení dolného tlačidla, keď sa modul rádia vypne volaním {\ttfamily radio.\+power\+Down()}. \Hypertarget{oled_8h_a73b1b0c88932700a241f54267bd1e202}\index{oled.h@{oled.h}!oled\_show\_radio\_screen@{oled\_show\_radio\_screen}}
\index{oled\_show\_radio\_screen@{oled\_show\_radio\_screen}!oled.h@{oled.h}}
\doxysubsubsection{\texorpdfstring{oled\_show\_radio\_screen()}{oled\_show\_radio\_screen()}}
{\footnotesize\ttfamily \label{oled_8h_a73b1b0c88932700a241f54267bd1e202} 
void oled\+\_\+show\+\_\+radio\+\_\+screen (\begin{DoxyParamCaption}\item[{int}]{freq\+\_\+khz}{, }\item[{int}]{volume}{, }\item[{int}]{rssi}{, }\item[{bool}]{muted}{}\end{DoxyParamCaption})}



Zobrazí hlavnú obrazovku rádia (frekvencia, hlasitosť, RSSI, mute). 

Funkcia typicky\+:
\begin{DoxyItemize}
\item vykreslí hlavičku („\+FM Radio“ alebo informáciu o mute),
\item vo väčšom fonte zobrazí aktuálnu frekvenciu (napr. {\ttfamily 107.\+0\+MHz}),
\item v spodnej časti zobrazí hlasitosť a RSSI.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em freq\+\_\+khz} & Frekvencia v k\+Hz (napr. 10700 → 107.\+0 MHz). \\
\hline
{\em volume} & Aktuálna hlasitosť (0–15 alebo podľa implementácie). \\
\hline
{\em rssi} & Hodnota RSSI (úroveň signálu z tunera). \\
\hline
{\em muted} & {\ttfamily true} ak je zvuk stlmený, inak {\ttfamily false}.\\
\hline
\end{DoxyParams}
Zobrazí hlavnú obrazovku rádia (frekvencia, hlasitosť, RSSI, mute).

Obrazovka obsahuje\+:
\begin{DoxyItemize}
\item horný riadok – hlavičku\+:
\begin{DoxyItemize}
\item „\+FM Radio is Mute“, ak je {\ttfamily muted} = true,
\item „\+FM Radio“, inak (s predchádzajúcim riadkom vyčisteným),
\end{DoxyItemize}
\item stred – veľkým fontom frekvencia v tvare „107.0MHz“,
\item spodný riadok – text „\+Vol\+:xx RSSI\+:yy“.
\end{DoxyItemize}


\begin{DoxyParams}{Parameters}
{\em freq\+\_\+khz} & Frekvencia v k\+Hz (napr. 10700 → 107.\+0 MHz). \\
\hline
{\em volume} & Hlasitosť (0–15 alebo podľa tunera). \\
\hline
{\em rssi} & RSSI hodnota, úroveň signálu. \\
\hline
{\em muted} & {\ttfamily true} ak je zvuk aktuálne stlmený, inak {\ttfamily false}. \\
\hline
\end{DoxyParams}
